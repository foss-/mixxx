<Template>
  <SetVariable name="group">[Channel<Variable name="i"/>]</SetVariable>
  <WidgetGroup>
    <ObjectName>DeckSmall</ObjectName>
    <Layout>vertical</Layout>
    <Children>

      <WidgetGroup>
        <ObjectName>Deck<Variable name="i" /></ObjectName>
        <Layout>horizontal</Layout>
        <Children>

          <!-- Spinny? -->

          <WidgetGroup>
            <Layout>horizontal</Layout>
            <Size>40f,40f</Size>
            <Children>
              <SingletonContainer>
                <ObjectName>DeckCoverArt<Variable name="i"/></ObjectName>
              </SingletonContainer>
            </Children>
            <Connection>
              <ConfigKey persist="true">[Skin],show_coverart</ConfigKey>
              <BindProperty>visible</BindProperty>
            </Connection>
          </WidgetGroup>

          <WidgetGroup>
            <ObjectName>OverviewGutterSmall</ObjectName>
            <Layout>horizontal</Layout>
            <Children>
              <Overview>
                <TooltipId>waveform_overview</TooltipId>
                <Group><Variable name="group"/></Group>
                <SizePolicy>me,me</SizePolicy>
                <BgColor><Variable name="DeckBackgroundColor"/></BgColor>
                <PlayedOverlayColor><Variable name="PlayedOverlayColor"/></PlayedOverlayColor>
                <SignalHighColor></SignalHighColor>
                <SignalMidColor></SignalMidColor>
                <SignalLowColor></SignalLowColor>
                <SignalRGBHighColor></SignalRGBHighColor>
                <SignalRGBMidColor></SignalRGBMidColor>
                <SignalRGBLowColor></SignalRGBLowColor>
                <SignalColor><Variable name="DeckSignalColor"/></SignalColor>
                <PlayPosColor>#00FF00</PlayPosColor>
                <DefaultMark>
                  <Align>bottom|right</Align>
                  <Color>#619dea</Color>
                  <TextColor>#FFFFFF</TextColor>
                  <Text> %1 </Text>
                </DefaultMark>
                <MarkRange>
                  <StartControl>loop_start_position</StartControl>
                  <EndControl>loop_end_position</EndControl>
                  <EnabledControl>loop_enabled</EnabledControl>
                  <Color>#00FF00</Color>
                  <DisabledColor>#FFFFFF</DisabledColor>
                </MarkRange>
                <Mark>
                  <Control>cue_point</Control>
                  <Align>top|right</Align>
                  <Color>#FF001C</Color>
                  <TextColor>#FFFFFF</TextColor>
                  <Text>C</Text>
                </Mark>
                <Connection>
                  <ConfigKey><Variable name="group"/>,playposition</ConfigKey>
                  <EmitOnDownPress>false</EmitOnDownPress>
                </Connection>
              </Overview>
            </Children>
          </WidgetGroup>

          <WidgetGroup>
            <ObjectName>DeckTextRowSmall</ObjectName>
            <Layout>vertical</Layout>
            <Size>200min,40f</Size>
            <Children>

              <WidgetGroup>
                <ObjectName>TitleGutterSmall</ObjectName>
                <Layout>horizontal</Layout>
                <Size>100me,22f</Size>
                <Children>
                  <!-- We allow to hide track/artist info (aka AM-Mode) in the skin settings,
                      display just a label with asterixes instead. -->
                  <TrackProperty>
                    <TooltipId>track_title</TooltipId>
                    <ObjectName>TitleTextSmall</ObjectName>
                    <SizePolicy>me,me</SizePolicy>
                    <Property>title</Property>
                    <Group><Variable name="group"/></Group>
                    <Elide>right</Elide>
                    <Connection>
                      <ConfigKey>[Deere],show_track_info</ConfigKey>
                      <BindProperty>visible</BindProperty>
                    </Connection>
                  </TrackProperty>

                  <Label>
                    <TooltipId>track_title</TooltipId>
                    <Size>me,min</Size>
                    <ObjectName>HiddenTrackTitleInfo</ObjectName>
                    <Text>***</Text>
                    <Connection>
                      <ConfigKey>[Deere],show_track_info</ConfigKey>
                      <BindProperty>visible</BindProperty>
                      <Transform>
                        <Not/>
                      </Transform>
                    </Connection>
                  </Label>
                </Children>
              </WidgetGroup><!-- TitleGutter -->

              <WidgetGroup><!-- Key / BPM / PlayPos -->
                <ObjectName>PosKeyBpmGutter</ObjectName>
                <Layout>horizontal</Layout>
                <Size>100me,17me</Size>
                <Children>

                  <WidgetGroup>
                    <ObjectName>PositionGutterSmall</ObjectName>
                    <Layout>horizontal</Layout>
                    <SizePolicy>min,me</SizePolicy>
                    <Children>
                      <NumberPos>
                        <SizePolicy>me,me</SizePolicy>
                        <TooltipId>track_time</TooltipId>
                        <Group><Variable name="group"/></Group>
                        <Alignment>left</Alignment>
                      </NumberPos>
                    </Children>
                  </WidgetGroup>

                  <WidgetGroup>
                    <ObjectName>BpmKeyGutterSmall</ObjectName>
                    <Layout>horizontal</Layout>
                    <SizePolicy>min,me</SizePolicy>
                    <Children>
                      <Key>
                        <TooltipId>visual_key</TooltipId>
                        <ObjectName>BpmKeyLabelSmall</ObjectName>
                        <Size>30me,16f</Size>
                        <Alignment>center</Alignment>
                        <Elide>right</Elide>
                        <Connection>
                          <ConfigKey><Variable name="group"/>,visual_key</ConfigKey>
                        </Connection>
                      </Key>
                    </Children>
                  </WidgetGroup>

                  <WidgetGroup>
                    <ObjectName>BpmKeyGutterSmall</ObjectName>
                    <Layout>horizontal</Layout>
                    <SizePolicy>min,me</SizePolicy>
                    <Children>
                      <NumberBpm>
                        <TooltipId>visual_bpm</TooltipId>
                        <ObjectName>BpmKeyLabelSmall</ObjectName>
                        <Size>60f,16f</Size>
                        <Alignment>center</Alignment>
                        <NumberOfDigits>2</NumberOfDigits>
                        <Group><Variable name="group"/></Group>
                        <Connection>
                          <ConfigKey><Variable name="group"/>,visual_bpm</ConfigKey>
                        </Connection>
                      </NumberBpm>
                    </Children>
                  </WidgetGroup>

                </Children>
              </WidgetGroup><!-- PositionKeyBpmGutter -->

            </Children>
          </WidgetGroup><!-- DeckTextRowSmall -->

          <WidgetGroup>
            <ObjectName>PlayGutterSmall</ObjectName>
            <Layout>horizontal</Layout>
            <SizePolicy>f,me</SizePolicy>
            <Children>
              <Template src="skin:left_right_display_2state_button.xml">
                <SetVariable name="TooltipId">play_cue_set</SetVariable>
                <SetVariable name="ObjectName">PlayToggle</SetVariable>
                <SetVariable name="MinimumSize">24,30</SetVariable>
                <SetVariable name="MaximumSize">24,</SetVariable>
                <SetVariable name="SizePolicy">f,me</SetVariable>
                <SetVariable name="left_connection_control"><Variable name="group"/>,play</SetVariable>
                <SetVariable name="right_connection_control"><Variable name="group"/>,cue_set</SetVariable>
                <SetVariable name="display_connection_control"><Variable name="group"/>,play_indicator</SetVariable>
              </Template>
            </Children>
          </WidgetGroup>

        </Children>
      </WidgetGroup><!-- DeckN -->
    </Children>
  </WidgetGroup><!-- DeckSmall -->
</Template>
